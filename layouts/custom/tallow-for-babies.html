<!DOCTYPE html>
<html lang="en">
<head>
    {{- partial "head.html" . -}}
    <meta name="description" content="Gentle, unscented tallow skincare for babies. 100% natural, NZ-made tallow balm for sensitive baby skin. Gold partners of the Eczema Association of New Zealand." />
    <meta property="og:title" content="Tallow for Babies | Gentle Unscented Skincare - PrimalCare NZ" />
    <meta property="og:description" content="100% natural, unscented tallow skincare for your baby's delicate skin. NZ-made, EANZ Gold Partner." />
</head>
<body>
    {{- partial "alert.html" . -}}
    {{- partial "header_new.html" . -}}

    <style>
        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, #fdf8f5 0%, #f9f1eb 50%, #fef6f0 100%);
            padding: 60px 0 50px;
            text-align: center;
        }

        .hero-section h1 {
            font-size: 2.8rem;
            font-weight: 700;
            color: #3d3d3d;
            margin-bottom: 0.75rem;
        }

        .hero-section .subtitle {
            font-size: 1.2rem;
            font-weight: 400;
            color: #6c757d;
            max-width: 550px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .hero-badges {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        .hero-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #fff;
            padding: 10px 16px;
            border-radius: 25px;
            font-size: 0.85rem;
            color: #3d3d3d;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        .hero-badge svg {
            color: #e8a4b0;
            width: 18px;
            height: 18px;
        }

        /* Products Section */
        .products-section {
            padding: 60px 0;
            background-color: #fef8f5;
        }

        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-header h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #3d3d3d;
        }

        .section-header p {
            font-size: 1rem;
            color: #6c757d;
        }

        /* Product Cards */
        .product-card {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
            border: none;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }

        .product-image-wrapper {
            position: relative;
            padding: 20px;
            background: #fdfbfa;
            text-align: center;
        }

        .product-image-wrapper img {
            max-height: 180px;
            width: auto;
        }

        .product-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-new {
            background: #ffc107;
            color: #333;
        }

        .badge-gentle {
            background: #88d8b0;
            color: #333;
        }

        .badge-unscented {
            background: #e1bee7;
            color: #4a235a;
        }

        .product-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .product-subtitle {
            font-size: 0.75rem;
            color: rgb(177, 152, 9);
            font-style: italic;
            margin-bottom: 6px;
        }

        .product-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #3d3d3d;
        }

        .product-title a {
            color: inherit;
            text-decoration: none;
        }

        .product-title a:hover {
            text-decoration: underline;
        }

        .product-benefit {
            font-size: 0.85rem;
            color: #6c757d;
            margin-bottom: 12px;
            flex-grow: 1;
        }

        .btn-pink {
            background-color: #ffb6c1;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-pink:hover {
            background-color: #ff9eb0;
            color: #000;
        }

        .btn-pink:disabled,
        .btn-pink.added {
            background-color: #98fb98;
            color: #000;
            cursor: default;
        }

        /* Bundle Section */
        .bundle-section {
            padding: 60px 0;
            background: #fff;
        }

        .bundle-content {
            padding: 0 20px;
        }

        .bundle-content h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #3d3d3d;
        }

        .bundle-description {
            font-size: 1rem;
            color: #6c757d;
            margin-bottom: 25px;
        }

        .bundle-pricing {
            margin-bottom: 25px;
        }

        .price-comparison {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }

        .usual-price, .sale-price {
            display: flex;
            flex-direction: column;
        }

        .price-label {
            font-size: 0.85rem;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .usual-price .price-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: #999;
            text-decoration: line-through;
        }

        .sale-price .price-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #3d3d3d;
        }

        .btn-bundle {
            background: linear-gradient(135deg, #e8a4b0 0%, #d48a96 100%);
            color: #fff;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .btn-bundle:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(232, 164, 176, 0.4);
            color: #fff;
        }

        .btn-bundle:disabled,
        .btn-bundle.added {
            background: #98fb98;
            color: #000;
            cursor: default;
            transform: none;
            box-shadow: none;
        }

        /* Toast Notification */
        .landing-toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: white;
            border-radius: 12px;
            padding: 16px 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.25);
            z-index: 999999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            max-width: 90vw;
        }

        .landing-toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .landing-toast-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .landing-toast-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .landing-toast-text strong {
            font-size: 14px;
            color: #333;
        }

        .landing-toast-text span {
            font-size: 12px;
            color: #666;
        }

        .landing-toast-btn {
            background: #000;
            color: #fff !important;
            padding: 8px 16px;
            border-radius: 6px;
            text-decoration: none !important;
            font-size: 13px;
            font-weight: 500;
            white-space: nowrap;
            margin-left: 8px;
        }

        /* Responsive */
        @media (max-width: 767px) {
            .hero-section {
                padding: 40px 0 30px;
            }

            .hero-section h1 {
                font-size: 2rem;
            }

            .hero-section .subtitle {
                font-size: 1rem;
            }

            .hero-badges {
                gap: 10px;
            }

            .hero-badge {
                padding: 8px 12px;
                font-size: 0.75rem;
            }

            .products-section {
                padding: 40px 0;
            }

            .section-header h2 {
                font-size: 1.6rem;
            }

            .landing-toast {
                bottom: 80px;
                left: 10px;
                right: 10px;
                transform: translateX(0) translateY(100px);
                max-width: none;
            }

            .landing-toast.show {
                transform: translateX(0) translateY(0);
            }
        }
    </style>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <h1>Tallow for Babies</h1>
            <p class="subtitle">Gentle, unscented tallow skincare made in New Zealand for delicate baby skin</p>
            
            <div class="hero-badges">
                <div class="hero-badge">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                    </svg>
                    Eczema Association Gold Partner
                </div>
                <div class="hero-badge">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                    </svg>
                    100% Natural
                </div>
                <div class="hero-badge">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                    </svg>
                    NZ Made
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products-section">
        <div class="container">
            <div class="section-header">
                <h2>Gentle Skincare for Your Baby</h2>
                <p>Natural tallow products suited for sensitive baby skin</p>
            </div>

            <div class="row g-4 justify-content-center">
                <!-- Product 1: Tallow Baby Butter -->
                <div class="col-12 col-md-6 col-lg-4">
                    <div class="product-card">
                        <div class="product-image-wrapper">
                            <span class="product-badge badge-new">Best Smelling</span>
                            <a href="/shop/products/tallow-baby-butter/">
                                <img src="/img/baby-butter-shop.webp" alt="Tallow Baby Butter" class="img-fluid">
                            </a>
                        </div>
                        <div class="product-content">
                            <p class="product-subtitle">PrimalCare Gold Edition</p>
                            <h3 class="product-title">
                                <a href="/shop/products/tallow-baby-butter/">Tallow Baby Butter</a>
                            </h3>
                            <p class="product-benefit">A soft, lightweight body butter specially formulated for young ones</p>
                            <p class="h5 fw-bold product-price" 
                               data-product="baby_butter"
                               data-size="120ml"
                               data-order-type="single_purchase">
                                Loading...
                            </p>
                            <button 
                                class="btn btn-pink quick-add-to-cart" 
                                data-product="baby_butter"
                                data-order-type="single"
                                data-flavor="natural"
                                data-size="120ml"
                                data-title="Tallow Baby Butter 120ml"
                                data-display-size="120ml"
                                data-display-flavor="Natural Chamomile"
                                data-display-order-type="Single jar">
                                Quick Add
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Product 2: Original Tallow Balm (Natural/Unscented 120ml) -->
                <div class="col-12 col-md-6 col-lg-4">
                    <div class="product-card">
                        <div class="product-image-wrapper">
                            <span class="product-badge badge-unscented">Most Natural</span>
                            <a href="/shop/products/tallow-balm/">
                                <img src="/img/balm-babies-natural.webp" alt="Original Tallow Balm Natural" class="img-fluid">
                            </a>
                        </div>
                        <div class="product-content">
                            <p class="product-subtitle">PrimalCare</p>
                            <h3 class="product-title">
                                <a href="/shop/products/tallow-balm/">Whipped Tallow Balm</a>
                            </h3>
                            <p class="product-benefit">Pure and simple - our original balm in natural unscented for sensitive skin</p>
                            <p class="h5 fw-bold product-price" 
                               data-product="balm"
                               data-size="120ml"
                               data-order-type="single_purchase">
                                Loading...
                            </p>
                            <button 
                                class="btn btn-pink quick-add-to-cart" 
                                data-product="balm"
                                data-order-type="single"
                                data-flavor="neutral"
                                data-size="120ml"
                                data-title="Whipped Tallow Balm 120ml"
                                data-display-size="120ml"
                                data-display-flavor="Natural"
                                data-display-order-type="Single jar">
                                Quick Add
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Product 3: Tallow Soap (Natural) -->
                <div class="col-12 col-md-6 col-lg-4">
                    <div class="product-card">
                        <div class="product-image-wrapper">
                            <span class="product-badge badge-gentle">Gentle Bath Time</span>
                            <a href="/shop/products/tallow-soap/">
                                <img src="/img/soap-babies-natural.webp" alt="Tallow Soap Natural" class="img-fluid">
                            </a>
                        </div>
                        <div class="product-content">
                            <p class="product-subtitle">Naturally Nourishing</p>
                            <h3 class="product-title">
                                <a href="/shop/products/tallow-soap/">Silky Tallow Soap</a>
                            </h3>
                            <p class="product-benefit">Gentle cleansing soap that won't strip your skin's natural oils</p>
                            <p class="h5 fw-bold product-price" 
                               data-product="soap"
                               data-size="120g"
                               data-order-type="single_purchase">
                                Loading...
                            </p>
                            <button 
                                class="btn btn-pink quick-add-to-cart" 
                                data-product="soap"
                                data-order-type="single"
                                data-flavor="natural"
                                data-size="120g"
                                data-title="Silky Tallow Soap"
                                data-display-size="120g"
                                data-display-flavor="Natural"
                                data-display-order-type="Single block">
                                Quick Add
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bundle Section -->
    <section class="bundle-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-12 col-lg-6 mb-4 mb-lg-0">
                    <img src="/img/bundle-babies-skincare.webp" alt="Tallow for Babies Bundle" class="img-fluid rounded-3">
                </div>
                <div class="col-12 col-lg-6">
                    <div class="bundle-content">
                        <h2>Get the Complete Tallow for Babies Skincare Set</h2>
                        <p class="bundle-description">Everything you need for your baby's gentle skincare routine - bundled together at a special price</p>
                        
                        <div class="bundle-pricing">
                            <div class="price-comparison">
                                <div class="usual-price">
                                    <span class="price-label">Combined Usual Price</span>
                                    <span class="price-value" id="bundleUsualPrice">Loading...</span>
                                </div>
                                <div class="sale-price">
                                    <span class="price-label">Save 20%</span>
                                    <span class="price-value" id="bundleSalePrice">Loading...</span>
                                </div>
                            </div>
                        </div>
                        
                        <button 
                            class="btn btn-bundle bundle-add-to-cart"
                            data-title="Baby Skincare Kit"
                            data-display-order-type="Bundle">
                            Claim Special Deal
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Toast Notification -->
    <div id="landingToast" class="landing-toast">
        <div class="landing-toast-content">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#98fb98" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
            </svg>
            <div class="landing-toast-text">
                <strong>Added to Cart!</strong>
                <span id="landingToastProduct"></span>
            </div>
            <a href="/cart" class="landing-toast-btn">View Cart</a>
        </div>
    </div>

    <script>
        // Parse pricing data from Hugo
        const pricingData = JSON.parse('{{ .Site.Data.pricing | jsonify }}');
        const country_code = getCountryCookie('country_code') || "NZ";
        
        // Baby Bundle pricing
        const bundleUsualPrice = 69.85;
        const bundleSalePrice = 55.88;
        const bundlePriceId = 'price_1SrmblFZRwx5tlYml0b7qksw';
        
        // Set bundle prices on page load
        function calculateBundlePrices() {
            document.getElementById('bundleUsualPrice').textContent = '$' + bundleUsualPrice.toFixed(2);
            document.getElementById('bundleSalePrice').textContent = '$' + bundleSalePrice.toFixed(2);
        }
    </script>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var pricingDataExists = typeof pricingData !== 'undefined';
        var countryCodeExists = typeof country_code !== 'undefined';
        
        if (!pricingDataExists || !countryCodeExists) {
            console.warn('Pricing data not available on this page');
        }
        
        // Show toast notification
        function showLandingToast(productName) {
            var toast = document.getElementById('landingToast');
            var productEl = document.getElementById('landingToastProduct');
            
            if (toast) {
                if (productEl) {
                    productEl.textContent = productName;
                }
                
                toast.classList.remove('show');
                void toast.offsetWidth;
                toast.classList.add('show');
                
                setTimeout(function() {
                    toast.classList.remove('show');
                }, 4000);
            }
            
            if (typeof triggerCartBounce === 'function') {
                triggerCartBounce(productName);
            }
        }
        
        // Update all product prices from YAML data
        function updateProductPrices() {
            if (!pricingDataExists) return;
            
            var priceElements = document.querySelectorAll('.product-price');
            
            priceElements.forEach(function(element) {
                var product = element.getAttribute('data-product');
                var size = element.getAttribute('data-size');
                var orderType = element.getAttribute('data-order-type');
                
                try {
                    var productPricingData = pricingData.tallow.pricing[product];
                    
                    if (Array.isArray(productPricingData)) {
                        var pricingEntry = productPricingData.find(function(entry) {
                            return entry.size.toLowerCase() === size.toLowerCase();
                        });
                        
                        if (pricingEntry && pricingEntry.prices[country_code] && pricingEntry.prices[country_code][orderType]) {
                            var price = pricingEntry.prices[country_code][orderType];
                            element.textContent = '$' + price.toFixed(2);
                        }
                    }
                } catch (error) {
                    console.error('Error updating price:', error);
                }
            });
        }
        
        updateProductPrices();
        calculateBundlePrices();
        
        // Handle bundle add to cart
        var bundleButton = document.querySelector('.bundle-add-to-cart');
        if (bundleButton) {
            bundleButton.addEventListener('click', function(e) {
                e.preventDefault();
                
                var btn = this;
                
                if (btn.classList.contains('added')) {
                    return;
                }
                
                var cart = JSON.parse(localStorage.getItem('cartV2')) || [];
                
                cart.push({
                    priceId: bundlePriceId,
                    title: 'Baby Skincare Kit',
                    size: '3 Products',
                    flavor: 'Natural/Unscented',
                    orderType: 'Bundle - 20% Off',
                    quantity: 1,
                    unitPrice: bundleSalePrice,
                    eligibleForDiscount: false
                });
                
                localStorage.setItem('cartV2', JSON.stringify(cart));
                
                btn.textContent = 'Added to Cart ✓';
                btn.classList.add('added');
                btn.disabled = true;
                
                if (typeof updateCartBadge === 'function') {
                    updateCartBadge();
                }
                
                showLandingToast('Baby Skincare Kit');
            });
        }
        
        // Handle all quick add to cart buttons
        var quickAddButtons = document.querySelectorAll('.quick-add-to-cart');
        
        quickAddButtons.forEach(function(button) {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                
                var btn = this;
                
                if (btn.classList.contains('added')) {
                    return;
                }
                
                var product = btn.getAttribute('data-product');
                var orderType = btn.getAttribute('data-order-type');
                var flavor = btn.getAttribute('data-flavor');
                var size = btn.getAttribute('data-size');
                
                var title = btn.getAttribute('data-title');
                var displaySize = btn.getAttribute('data-display-size');
                var displayFlavor = btn.getAttribute('data-display-flavor');
                var displayOrderType = btn.getAttribute('data-display-order-type');
                var quantity = 1;
                
                if (!pricingDataExists) {
                    alert('Unable to add product to cart. Pricing data not available.');
                    return;
                }
                
                var priceId = null;
                var unitPrice = 0;
                
                try {
                    priceId = pricingData.tallow.ids[product][orderType][flavor][size][country_code];
                    
                    var productPricingData = pricingData.tallow.pricing[product];
                    
                    if (Array.isArray(productPricingData)) {
                        var pricingEntry = productPricingData.find(function(entry) {
                            return entry.size.toLowerCase() === size.toLowerCase();
                        });
                        
                        if (pricingEntry && pricingEntry.prices[country_code]) {
                            var pricingOrderType = orderType === 'single' ? 'single_purchase' : 
                                                  orderType === 'pack' ? 'three_pack' : orderType;
                            
                            unitPrice = pricingEntry.prices[country_code][pricingOrderType] || 0;
                        }
                    }
                } catch (error) {
                    console.error('Error fetching data from YAML:', error);
                }
                
                if (!priceId || unitPrice === 0) {
                    console.error('Invalid price data for product:', title);
                    alert('Unable to add this product to cart. Please visit the product page.');
                    return;
                }
                
                var cart = JSON.parse(localStorage.getItem('cartV2')) || [];
                
                cart.push({
                    priceId: priceId,
                    title: title,
                    size: displaySize,
                    flavor: displayFlavor,
                    orderType: displayOrderType,
                    quantity: quantity,
                    unitPrice: unitPrice,
                    eligibleForDiscount: false
                });
                
                localStorage.setItem('cartV2', JSON.stringify(cart));
                
                btn.textContent = 'Added ✓';
                btn.classList.add('added');
                btn.disabled = true;
                
                if (typeof updateCartBadge === 'function') {
                    updateCartBadge();
                }
                
                showLandingToast(title);
                
                console.log('Added to cart:', title);
            });
        });
    });
    </script>

    {{- partial "footer.html" . -}}
</body>
</html>
