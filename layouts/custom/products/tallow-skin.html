<!DOCTYPE html>
<html lang="ja">
<head>
    {{- partial "head.html" . -}}
    <meta name="description" content="{{ .Site.Params.homepage_meta_tags.meta_og_description }}" />
    <meta property="og:title" content="{{ .Site.Params.homepage_meta_tags.meta_og_title }}" />
    <meta property="og:type" content="{{ .Site.Params.homepage_meta_tags.meta_og_type }}" />
    <meta property="og:url" content="{{ .Site.Params.homepage_meta_tags.meta_og_url }}" />
    <meta property="og:image" content="{{ .Site.Params.homepage_meta_tags.meta_og_image }}" />
    <meta property="og:description" content="{{ .Site.Params.homepage_meta_tags.meta_og_description }}" />
    <meta name="twitter:card" content="{{ .Site.Params.homepage_meta_tags.meta_twitter_card }}" />
    <meta name="twitter:site" content="{{ .Site.Params.homepage_meta_tags.meta_twitter_site }}" />
    <meta name="twitter:creator" content="{{ .Site.Params.homepage_meta_tags.meta_twitter_creator }}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" />
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
    <script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=667c998f7bead90019480329&product=inline-share-buttons&source=platform" async="async"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://js.stripe.com/v3/"></script> <!-- Stripe script -->
</head>
<body>
    {{- partial "alert.html" . -}}
    {{- partial "header.html" . -}}
    
    <div class="container">
        <div class="row topbanner rel">
            <div class="col-xs-12 col-lg-6 product-photos">
                {{- partial "tallowskinimages.html" . -}}
            </div>
            <div class="col-xs-12 col-lg-6">
                <h1 class="my-4">Tallow Balm - Heavenly Smooth</h1>
                <p id="priceDisplay" class="product-price"></p> <!-- Placeholder for the price -->

                <!-- Product Form Options with Bootstrap Styling -->
                <form>
                    <!-- Dropdown for selecting scent -->
                    <div class="form-group mb-4">
                        <label for="productScent" class="font-weight-bold">Select Scent:</label>
                        <select id="productScent" class="form-control">
                            <option value="lavendar">Lavender</option>
                            <option value="rose">Rose</option>
                            <option value="neutral">Neutral</option>
                            <option value="vanilla">Light Vanilla</option>
                            <option value="francensense">Frankincense</option><!-- 
                            <option value="patchouli">Patchouli</option>
                            <option value="sweetorange">Sweet Orange</option> -->
                        </select>
                    </div>

                    <!-- Dropdown for selecting size -->
                    <div class="form-group mb-4">
                        <label for="productSize" class="font-weight-bold">Select Size:</label>
                        <select id="productSize" class="form-control">
                            <option value="100ml">100ml</option>
                            <option value="200ml">200ml</option>
                        </select>
                    </div>

                    <!-- Checkbox for Oil Type -->
                    <div class="form-group form-check mb-4" style="display: none;">
                        <input type="checkbox" class="form-check-input" id="jojobaCheckbox" checked>
                        <label class="form-check-label" for="jojobaCheckbox">Use Jojoba Oil</label>
                    </div>

                    <!-- Quantity Selector -->
                    <div class="form-group mb-4">
                        <label for="quantityAll" class="font-weight-bold">Quantity:</label>
                        <input type="number" class="form-control" id="quantityAll" name="quantity" min="1" value="1">
                    </div>

                    <!-- Add to Cart Button -->
                    <div class="text-center mb-4">
                        <button type="button" class="btn btn-primary btn-lg buy-now" data-price-id="" data-quantity-id="quantityAll">Add To Cart</button>
                    </div>
                </form>

                <p>Shipping & promotions applied at checkout</p>


                <img class="badges mb-4" src="/img/stripe-badge-transparent.webp" alt="stripe secure badges">
            </div>
        </div>
        <div class="row mt-0">
            <div class="col-12 col-md-6">
                    <img src="/img/markets/11.webp" alt="Click to watch video" id="thumbnail" data-video-id="videoContainer1">
            </div>
            <div class="faq-tab-container col-12 col-md-6">
                <!-- Nav tabs -->
                <div class="faq-nav-tabs">
                    <div class="faq-nav-tab active" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">Description</div>
                    <div class="faq-nav-tab" id="ingredients-tab" data-toggle="tab" href="#ingredients" role="tab" aria-controls="ingredients" aria-selected="false">Ingredients</div>
                    <div class="faq-nav-tab" id="directions-tab" data-toggle="tab" href="#directions" role="tab" aria-controls="directions" aria-selected="false">Directions</div>
                    <div class="faq-nav-tab" id="storage-tab" data-toggle="tab" href="#storage" role="tab" aria-controls="storage" aria-selected="false">Storage</div>
                    <div class="faq-nav-tab" id="shipping-tab" data-toggle="tab" href="#shipping" role="tab" aria-controls="shipping" aria-selected="false">Shipping</div>
                </div>
        
                <!-- Tab panes -->
                <div class="tab-content faq-tab-content">
                    <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                        <h4>Description</h4>
                        <p>We are a CHCH-based bone broth business and found ourselves wasting too much beef tallow. So we decided to make tallow balm skincare products from it! </p>
                        <p>Beef tallow balm is an amazing, natural moisturiser! It nourishes your skin without clogging pores and also fights skin conditions like eczema. </p>
                            <p>Selling in jars of 100ml and 200ml at a price others can't match due to it being a byproduct of our other products!</p>
                        <p>You can come purchase from us at Ohoka or Lyttelton markets every week or order here! Shipping available NZ wide.</p>

                        <p>Pick your essential oil: lavender, francensent, light vanilla, rose.</p>

                        
                        {{ if .Params.charitylink }}
                        <p><a style="text-decoration: none;" href="{{ .Params.charitylink }}" rel="nofollow">Want to learn more about this charity? see here</a></p>
                        {{ end }}                       
                        
                        
                        
                        
                    </div>
                    <div class="tab-pane fade" id="ingredients" role="tabpanel" aria-labelledby="ingredients-tab">
                        <h4>Ingredients</h4>
                        <p><span class="product-flavour">Grass-fed purified NZ beef tallow, organic olive oil, organic jojoba oil, essential oil. 
                                                    </div>
                    <div class="tab-pane fade" id="directions" role="tabpanel" aria-labelledby="directions-tab">
                        <h4>Directions</h4>
                        <p>Apply a small amount on the face, neck, hands or feet daily in the morning as a moisturiser or evening as a night cream. Best used on slightly damp skin.</p>
                        <p>Body and facial moisturizer. Eczema cream, monthly hair conditioner.</p>


                    </div>
                    <div class="tab-pane fade" id="storage" role="tabpanel" aria-labelledby="storage-tab">
                        <h4>Storage</h4>
                        <p>Keep in temperatures below 30 degrees and out of direct sunlight to maintain the shelf life of this balm.</p>
                    </div>
                    <div class="tab-pane fade" id="shipping" role="tabpanel" aria-labelledby="shipping-tab">
                        <h4>Shipping</h4>
                        <p><strong>Processing time:</strong> Your order will be confirmed within 1-3 business days after payment confirmation. After processing, your order will be shipped the next day and you can expect usual courier times to your area (generally 3-5 business days) </p>
                        <p><strong>Shipping rates:</strong> We usually charge between $4.95 and $6.95 for shipping. You can view the shipping costs at the checkout before completing your purchase.</p>
                        <p><strong>International shipping:</strong> Currently, we only offer shipping within New Zealand. We apologize for any inconvenience this may cause.</p>
                        <p>If you have any questions or concerns regarding shipping, please don't hesitate to <a href="contact.html">contact us</a>.</p>
                    </div>
                </div>
            </div>
        
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    var tabs = document.querySelectorAll('.faq-nav-tab');
                    tabs.forEach(function(tab) {
                        tab.addEventListener('click', function() {
                            document.querySelector('.faq-nav-tab.active').classList.remove('active');
                            tab.classList.add('active');
                            var tabContent = document.querySelector('.faq-tab-content .tab-pane.show.active');
                            tabContent.classList.remove('show', 'active');
                            var target = tab.getAttribute('href');
                            document.querySelector(target).classList.add('show', 'active');
                        });
                    });
                });
            </script>
            </div>


            <div class="row">
                <div class="eighty middle">
                    <h2 class="text-center">Frequently Asked Questions</h2>
                    <div class="faq mt-4">
                        
                        <div class="accordion-item grow">
                            <h4 class="accordion-heading">What does it smell like? </h4>
                            <div class="accordion-content">
                              <p>Our whipped tallow is made with all natural processes and ingredients. Primarily it is beef tallow and this aroma can shine through, particularly for the Neutral / Natural option. Customers who have a keen sense of smell and think they will notice the tallow more will benefit from choosing our stronger scents like frankincense or lavender. To get the benefits without any smell many customers also put it on in the evening before bed instead of the morning.</p>
                            </div>
                          </div>
                        
                          <div class="accordion-item grow">
                            <h4 class="accordion-heading">How do I use the beef tallow balm?</h4>
                            <div class="accordion-content">
                              <p>Apply sparingly to the face, hands, neck and other problem areas. For best results we recommend using in the evening before bed.</p>
                            </div>
                          </div>
        
                          <div class="accordion-item grow show">
                            <h4 class="accordion-heading">What makes your tallow balm unique?</h4>
                            <div class="accordion-content">
                              <p>Our tallow balm is very whipped, light and fluffy. This makes it easy to get the perfect amount for your skin and helps with fast absorption.</p>
                            </div>
                          </div>
                
                      </div>                         
                    </div>
                </div>


    </div>
    </div>

    <!-- Script for handling the selection, updating the price ID, and Stripe checkout -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const stripe = Stripe('pk_live_51Ot2iTABkrUo6tgOu44jd79tB4Dg2B64I6lucmLcKdxZfcy2Dy3bTnbxQNiwDtRfeWSwWx1WsDpC0h91tTlubPXW000IuWtQTX');

            // Set up event listeners for dropdowns
            document.getElementById('productScent').addEventListener('change', updatePriceID);
            document.getElementById('productSize').addEventListener('change', updatePriceID);
            document.getElementById('jojobaCheckbox').addEventListener('change', updatePriceID);

            // Handle add to cart button click
            document.querySelector('.buy-now').addEventListener('click', handleAddToCart);

            function updatePriceID() {
                const isJojoba = document.getElementById('jojobaCheckbox').checked ? 'jojoba' : 'olive';
                const selectedScent = document.getElementById('productScent').value;
                const selectedSize = document.getElementById('productSize').value;

                const priceID = priceIDs[isJojoba][selectedScent][selectedSize];
                const unitPrice = getPriceText(priceID);

                // Update the button's data-price-id and unit price
                document.querySelector('.buy-now').setAttribute('data-price-id', priceID);
                document.querySelector('.buy-now').setAttribute('data-unit-price', unitPrice);
            }

            function getPriceText(priceID) {
    // Fetch the price based on the priceID
    switch (priceID) {
        case '{{ index .Params "olive-lavendar-50ml" }}':
        case '{{ index .Params "jojoba-lavendar-50ml" }}':
        case '{{ index .Params "olive-rose-50ml" }}':
        case '{{ index .Params "jojoba-rose-50ml" }}':
        case '{{ index .Params "olive-neutral-50ml" }}':
        case '{{ index .Params "jojoba-neutral-50ml" }}':
        case '{{ index .Params "olive-vanilla-50ml" }}':
        case '{{ index .Params "jojoba-vanilla-50ml" }}':
        case '{{ index .Params "olive-francensense-50ml" }}':
        case '{{ index .Params "jojoba-francensense-50ml" }}':
        case '{{ index .Params "olive-patchouli-50ml" }}':
        case '{{ index .Params "jojoba-patchouli-50ml" }}':
        case '{{ index .Params "olive-sweetorange-50ml" }}':
        case '{{ index .Params "jojoba-sweetorange-50ml" }}':
            return 19.00; // Price for 50ml sizes

        case '{{ index .Params "olive-lavendar-100ml" }}':
        case '{{ index .Params "jojoba-lavendar-100ml" }}':
        case '{{ index .Params "olive-rose-100ml" }}':
        case '{{ index .Params "jojoba-rose-100ml" }}':
        case '{{ index .Params "olive-neutral-100ml" }}':
        case '{{ index .Params "jojoba-neutral-100ml" }}':
        case '{{ index .Params "olive-vanilla-100ml" }}':
        case '{{ index .Params "jojoba-vanilla-100ml" }}':
        case '{{ index .Params "olive-francensense-100ml" }}':
        case '{{ index .Params "jojoba-francensense-100ml" }}':
        case '{{ index .Params "olive-patchouli-100ml" }}':
        case '{{ index .Params "jojoba-patchouli-100ml" }}':
        case '{{ index .Params "olive-sweetorange-100ml" }}':
        case '{{ index .Params "jojoba-sweetorange-100ml" }}':
            return 35.00; // Price for 100ml sizes

        default:
            return 35.00; // Default price if no matching ID found
    }
}


            function handleAddToCart(e) {
                e.preventDefault();
                const button = e.target;
                const priceId = button.getAttribute('data-price-id');
                const unitPrice = parseFloat(button.getAttribute('data-unit-price')).toFixed(2);
                const quantity = parseInt(document.getElementById('quantityAll').value, 10);
                const selectedScent = document.getElementById('productScent').value;
                const selectedSize = document.getElementById('productSize').value;
                const isJojoba = document.getElementById('jojobaCheckbox').checked;

                if (!priceId) {
                    alert('Please select a scent and size.');
                    return;
                }

                // Modify the flavor text to include " + Jojoba" if the checkbox is checked
                const flavorText = isJojoba ? `${selectedScent} + Jojoba` : selectedScent;

                // Add product to cart (localStorage)
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                const productTitle = document.querySelector('h1').innerText;

                cart.push({ priceId, quantity, flavour: flavorText, size: selectedSize, unitPrice, title: productTitle });
                localStorage.setItem('cart', JSON.stringify(cart));

                // Show "Added to Cart" modal
                $('#addedToCartModal').modal('show');
            }

            const priceIDs = {
                olive: {
                    lavendar: { '100ml': '{{ index .Params "olive-lavendar-50ml" }}', '200ml': '{{ index .Params "olive-lavendar-100ml" }}' },
                    rose: { '100ml': '{{ index .Params "olive-rose-50ml" }}', '200ml': '{{ index .Params "olive-rose-100ml" }}' },
                    neutral: { '100ml': '{{ index .Params "olive-neutral-50ml" }}', '200ml': '{{ index .Params "olive-neutral-100ml" }}' },
                    vanilla: { '100ml': '{{ index .Params "olive-vanilla-50ml" }}', '200ml': '{{ index .Params "olive-vanilla-100ml" }}' },
                    francensense: { '100ml': '{{ index .Params "olive-francensense-50ml" }}', '200ml': '{{ index .Params "olive-francensense-100ml" }}' },
                    patchouli: { '100ml': '{{ index .Params "olive-patchouli-50ml" }}', '200ml': '{{ index .Params "olive-patchouli-100ml" }}' },
                    sweetorange: { '100ml': '{{ index .Params "olive-sweetorange-50ml" }}', '200ml': '{{ index .Params "olive-sweetorange-100ml" }}' }
                },
                jojoba: {
                    lavendar: { '100ml': '{{ index .Params "jojoba-lavendar-50ml" }}', '200ml': '{{ index .Params "jojoba-lavendar-100ml" }}' },
                    rose: { '100ml': '{{ index .Params "jojoba-rose-50ml" }}', '200ml': '{{ index .Params "jojoba-rose-100ml" }}' },
                    neutral: { '100ml': '{{ index .Params "jojoba-neutral-50ml" }}', '200ml': '{{ index .Params "jojoba-neutral-100ml" }}' },
                    vanilla: { '100ml': '{{ index .Params "jojoba-vanilla-50ml" }}', '200ml': '{{ index .Params "jojoba-vanilla-100ml" }}' },
                    francensense: { '100ml': '{{ index .Params "jojoba-francensense-50ml" }}', '200ml': '{{ index .Params "jojoba-francensense-100ml" }}' },
                    patchouli: { '100ml': '{{ index .Params "jojoba-patchouli-50ml" }}', '200ml': '{{ index .Params "jojoba-patchouli-100ml" }}' },
                    sweetorange: { '100ml': '{{ index .Params "jojoba-sweetorange-50ml" }}', '200ml': '{{ index .Params "jojoba-sweetorange-100ml" }}' }
                }
            };

            // Initial update on page load
            updatePriceID();
        });
    </script>

    <!-- Bootstrap Modal for Added to Cart -->
    <div class="modal fade" id="addedToCartModal" tabindex="-1" aria-labelledby="addedToCartModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addedToCartModalLabel">Item Added to Cart</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Your item has been added to the cart. What would you like to do next?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Continue Shopping</button>
                    <a href="/cart" class="btn btn-primary">Go to Cart</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
    // Existing event listeners
    document.getElementById('productScent').addEventListener('change', updatePriceID);
    document.getElementById('productSize').addEventListener('change', updatePriceID);
    document.getElementById('jojobaCheckbox').addEventListener('change', updatePriceID);

    function updatePriceID() {
        const selectedSize = document.getElementById('productSize').value;

        // Get the placeholder for price
        const priceDisplay = document.getElementById('priceDisplay');

        // Determine the price to display
        if (selectedSize === '100ml') {
            priceDisplay.innerHTML = '{{ partial "price-tallow-skin-50.html" . }}';
        } else if (selectedSize === '200ml') {
            priceDisplay.innerHTML = '{{ partial "price-tallow-skin-100.html" . }}';
        }
    }

    // Initial update on page load
    updatePriceID();
});

    </script>
    

    <!-- Include Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

    {{- partial "footer.html" . }}
</body>
</html>
